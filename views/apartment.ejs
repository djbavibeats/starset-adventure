<!DOCTYPE html>
<html id="content">
  <head>
    <% include _meta %>
      <meta name="apple-mobile-web-app-capable" content="yes"/>
    <!-- <script src="aframe.js"></script> -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    
    <script src="/main.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/main.css">
    <style>
      #close-sheet-music {
        position: relative;
        right: -140px;
        top: -25px;
      }
    
      #sheet-music-wrapper {
        display: none;
        position: absolute;
        align-items: center;
        background: rgba(0,0,0,.5);
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
      }
    
      #sheet-music {
        background: rgba(0,0,0,.95);
        border: 1px solid #1226AA; 
        color: white;
        border-radius: 25px;
        width: 65%;
        display: flex;
        flex-direction: column;
        padding: 50px;
        align-items: center;
        margin: 0 auto;
        z-index: 10;
      }
    
      #document {  
        width: auto;
        max-width: 100%;
      }

      .document-wrapper {
        word-break: break-all;
        white-space: normal;
        font-size: 14px;
        text-align: center;
      }

      .document-wrapper img {
        width: 100%;
      }
    
      #sheet-music {
        color: white;
      }
    
      .identification-wrapper {
        display: flex;
        align-items: end;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <img id="hud" src="hud.png" class="hud-overlay" />
    <div class="spotify-modal">
      <iframe src="https://open.spotify.com/embed/album/0tJI0EBOHEcxov6V1ddIo7?utm_source=generator&amp;theme=0" width="100%" height="90%" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
      <button class="spotify-close-button" onclick="closeModal();">Close</button>
    </div>
    <div onclick="openModal();" class="spotify-open-button">OPEN MUSIC</div>
    <div onclick="exitModal();" class="exit-button">EXIT</div>

    <a-scene class="a-scene" cursor="rayOrigin: mouse; fuseTimeout: 0;" loading-screen="dotsColor: white; backgroundColor: black" vr-mode-ui="enabled: false">
      <a-assets>  
          <img id="vacation-mode" src="vacation_mode.png" />
          <img id="vacation-mode" src="hud.png" />
          <a-asset-item id="star-obj" src="star.obj"></a-asset-item>
          <a-asset-item id="star-mtl" src="star.mtl"></a-asset-item>
          
          <img id="apartment" src="apartment.png" />
        </a-assets>
        <!-- Background -->
        <a-camera look-controls-enabled="true" look-controls="touchEnabled: true"></a-camera>
        <a-plane visible="false" id="boatLink" position="-24.12 1.23 5.5" width="6.2" height="7.5" rotation="0 88.75 0"></a-plane>
        <a-plane visible="false" onclick="openWebsite();" position="-10 3.45 -3" width="1.5" height="1.75" rotation="0 75 0"></a-plane>
        <a-plane visible="false" id="sheetMusic" position="5.1 -.52 2.481" rotation="-12.78 -166.52 -.16" scale="3.46 1 1"></a-plane>
        <a-obj-model src="#star-obj" mtl="#star-mtl" position="2.251 -1.395 15.951" scale="10 10 10" 
          animation="property: rotation; to: 0 360 0; duration: 7000ms; easing: linear; loop: true;" 
          animation__2="property: position; to: -10 2.6 -3; from: -10 3 -3; loop: true; easing: linear; dir: alternate;"
          
        >
        </a-obj-model>
        <a-image id="vacationMode" class="vacationMode" opacity=".5" src="#vacation-mode"  position=".7 3.25 -3" rotation="20 0 0"></a-image>
        <a-sky src="#apartment"></a-sky>

    </a-scene>
    <div id="sheet-music-wrapper"><div id="sheet-music">
      <div id="close-sheet-music">X</div>
      <div class="document-wrapper">
        <img src="score_updated.png" />
      </div>
    </div></div>
  </body>

<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        var scene = document.querySelector("a-scene");
        document.getElementById('boatLink').addEventListener('click', function() {
            window.location.href = "/village-three"
        })
    })

    const piano = new Audio ('piano.mp3');
    document.getElementById('sheetMusic').addEventListener('click', function() {
        piano.play();
        $('#sheet-music-wrapper').css({
          "display": "flex",
        })
    })

    document.querySelector('#close-sheet-music').addEventListener('click', function() {
      $('#sheet-music-wrapper').css({
        'display': 'none'
      })
    })

</script>
<script src="vacayMode.js"></script>

<!-- Here's a challenge for all mankind... -->
<!-- 8.21.9.22.10.23.11.24.12.25.13.26 -->
<!-- ...don't quit on me. -->
</html>
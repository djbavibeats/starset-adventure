<!DOCTYPE html>
<html id="content">
  
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <% include _header %>
  <% include _meta %>
  <body>
    <video class="long_orator" src="/glitches/long_orator.mp4" id="glitch_two" muted autoplay loop="true" playsinline webkit-playsinline></video>
    <img id="hud" src="hud.png" class="hud-overlay" />
    <div class="spotify-modal">
      <iframe src="https://open.spotify.com/embed/playlist/6K1onH2oluQQegbkydUBMw?theme=0" width="100%" height="90%" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
      <button class="spotify-close-button" onclick="closeModal();">Close</button>
    </div>
    <div onclick="openModal();" class="spotify-open-button">OPEN MUSIC</div>
    <div onclick="exitModal();" class="exit-button">EXIT</div>

    <a-scene class="a-scene" cursor="rayOrigin: mouse; fuseTimeout: 0;" loading-screen="dotsColor: white; backgroundColor: black" vr-mode-ui="enabled: false">
        <a-assets>  
          <img id="vacation-mode" src="vacation_mode.png" />
          <img id="vacation-mode" src="hud.png" />
          <img id="space" src="space.png" />
          <a-asset-item id="star-obj" src="star.obj"></a-asset-item>
          <a-asset-item id="star-mtl" src="star.mtl"></a-asset-item>
        </a-assets>
        <!-- Background -->
        <a-camera look-controls-enabled="true"></a-camera>
        <a-image id="vacationModeSpace" class="vacationModeSpace" opacity=".5" src="#vacation-mode"  position=".7 3.25 -3" rotation="20 0 0"></a-image>
        <a-plane visible="false" onclick="openWebsite();" position="-7.5 1.6 -7.5" width="1.5" height="1.75" rotation="0 45 0"></a-plane>
        <a-obj-model src="#star-obj" mtl="#star-mtl" position="-8 1 -8" scale="10 10 10" 
        animation="property: rotation; to: 0 360 0; duration: 7000ms; easing: linear; loop: true;" 
        animation__2="property: position; to: -8 .6 -8; from: -8 1 -8; loop: true; easing: linear; dir: alternate;"
        >
        </a-obj-model>
        <a-sky class="space" src="#space"></a-sky>
        <!-- <a-videosphere ios-video-fix id="videoSphere" src="#video"  muted></a-videosphere> -->

    </a-scene>
  </body>

<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        var scene = document.querySelector("a-scene");
    })

    let orator = document.querySelector('.long_orator')
    const static = new Audio('static.mp3')

    static.addEventListener('ended', function() {
        this.currentTime = 0;
        this.play();
    }, false);

    document.querySelector('.space').addEventListener('click', function() {
        orator.style.display = 'block';
        orator.style.opacity = 1;
        static.play();
        setInterval(function() {
            window.location.href = "/"
        }, 5000)
    })
</script>
<!-- <script src="vacayMode.js"></script> -->
</html>